\section{Описание разработанного метода}
	%При изучении ли масштабируемости разрабатываемого приложения или поиске оптимальной конфигурации запуска, такой что 
	%- эмпирические данные
	В работе рассматривается слабая масштабируемость суперкомпьютерных приложений, которая характеризует способность параллельной программы сохранять эффективность распараллеливания при увеличении числа процессоров и одновременном сохранении объема работы, приходящегося на каждый процессор, то есть выполняется соотношение:
	\begin{equation}\label{weak_sc}
	T_A(N)\:/\:p = const
	\end{equation}

	\subsection{Экстраполирующая функция и оценка ошибок предсказаний}
		В качестве метода для построения предсказания из всех рассмотренных ранее выбрана линейная регрессия, потому что, во-первых, модель получается простой, что упрощает поиск неизвестных параметров, однако точность предсказаний либо сопоставима, либо даже лучше, чем у остальных методов, во-вторых, чтобы осуществить поиск регрессионных параметров не требуется большого количества запусков приложения, как, например, для обучения нейронной сети или построения прогноза с помощью коллаборативной фильтрации, в-третьих, для построения точного прогноза нет необходимости использовать исходный код программ и сведения о вычислительной системе, то есть выбранный метод является достаточно универсальным.%удовлетворяет всем поставленным требованиям универсальности.

		С помощью линейной регрессии строятся предсказания значений динамических характеристик работы программы на \(\dot{p}\) процессах, используя эмпирические данные, полученные из нескольких запусков этой же программы на \(q\) процессах, где
		\[
		q \in \mathbb{Q} = \{q_1,\ldots, q_n\},\ q_1 < q_2 < \ldots < q_n < \dot{p}
		\]
		Предиктор значения динамической характеристики представляет собой функцию, зависящую от параметров запуска \(X = (x_1, x_2, \ldots, x_n)\), определяющих конфигурацию, таких как размер задачи, конфигурация процессорной сетки, размеры задачи обсчитываемой локально одним процессом и других, и от количества используемых процессов \(p\):
		\begin{equation}\label{main_formula}
		DF = \hat{DF} + error = F(x_1, x_2, \ldots, x_n, p) + error
		\end{equation}
		Где \(DF\ и\ \hat{DF}\) - полученное из эксперимента и предсказываемое значения динамической характеристики. Предполагается, что функция \(F\) зависит от неизвестных регрессионных параметров линейно.

		Для нахождения оптимальных значений этих параметров используется метод наименьших квадратов, он минимизирует сумму квадратов ошибок:
		\[
		SSE = |f(w, g(X)) - y|_2 = \sum_{i = 1}^{N}{(f(w, g_i(X)) - y_i)^2 \rightarrow min}
		\]
		Что эквивалентно минимизации абсолютной ошибки \(error\) из формулы \eqref{main_formula}.
		\begin{equation}
			\label{RE} 
			RE = \frac{|DF - \hat{DF}|}{DF}
		\end{equation}
		\begin{equation}
			\label{RE_norm}
			RE_{norm} = \frac{|error|}{DF}
		\end{equation}
		\begin{equation}
			\label{RE_log}
			RE_{log}= 2^{|error|} - 1
		\end{equation}
		Однако для оценки качества предсказаний принято использовать относительную ошибку, которая вычисляется по формуле \eqref{RE}. Если использовать введённые ранее обозначения, то её можно переписать в виде \eqref{RE_norm}. Получается, что относительная ошибка зависит не только от минимизируемой с помощью метода наименьших квадратов ошибки, но и от значения динамической характеристики, из-за этого на малом количестве процессов абсолютная ошибка может быть маленькой при большой относительной, а на большом количестве процессов большой при малой относительной ошибке, что никак не может устраивать. Поэтому исходное выражение было модифицировано. Для этого применён такой же, как и в \cite{log_main}, подход, а именно приближение аппроксимируемой величины в логарифмическом масштабе. Тогда исходное выражение \eqref{main_formula} преобразуется в \eqref{main_log_formula}, а формула \eqref{RE_norm} для вычисления относительной ошибки в \eqref{RE_log}. Теперь значение относительной ошибки зависит только от минимизируемой абсолютной ошибки, что и являлось целью преобразования.
		\begin{equation}\label{main_log_formula}
		\log{(DF)} = \log{\hat{(DF)}} + error
		\end{equation}
		Ключевым шагом является параметризация функции \(log{\hat(DF)} = log(F(x_1, x_2, \ldots, x_n, p))\). Наиболее точные предсказания удалось получить при помощи функции вида:
		\begin{equation}
		\log{\hat(DF)} = \beta_{1} \cdot \log{(p)} + \beta_{2} \cdot \log{(N)} + \beta_{3} \cdot \log{(p)} \cdot \log{(N)}
		\end{equation}
		Здесь за \(N\) обозначен размер задачи, а за \(p\) количество процессов, на которых эта задача запускается. Несмотря на наличие логарифмов, статистически это всё ещё линейная модель, поскольку она линейна относительно неизвестных параметров, поэтому можно использовать обширную статистическую теорию линейных моделей, в том числе поиск коэффициента с помощью метода наименьших квадратов.

	\subsection{Выбор конфигураций и проведение запусков}
		Для того чтобы исследовать слабую масштабируемость должно быть заранее известно, какие параметры запуска отвечают за определение размера задачи и как именно сложность работы программы зависит от этих самых параметров. Зная на скольких процессах требуется запустить задачу, сложность программы и используя соотношение \eqref{weak_sc}, можно установить, какая должна быть сложность задачи и определяющие её параметры запуска программы. Тогда процессы из множества \(\mathbb{Q}\) вместе с соответствующими им параметрами запуска будем называть тестовыми конфигурациями, а конфигурации, на которых будет оцениваться качество предсказаний метода - целевыми.

		При сборе тестовых данных необходимо прежде всего определить тестовые конфигурации запусков. Для этого нужно узнать, сколько доступно процессов - \(p_{max}\), составить множество \[\mathbb{Q} = \{q_{i + 1} - q_{i} = const,\ i = \overline{1,n - 1};\ q_n = p_{max}\}\] и определить соответствующие параметры запуска.

		%Стоит отметить, что из-за того, что рассматривается слабая масштабируемость, то зная количество процессов, сложность программы и используя соотношение \eqref{weak_sc}, можно установить, какие должны быть сложность задачи и определяющие её параметры запуска программы. Тогда процессы из множества \(\mathbb{P}\) вместе с соответствующими им параметрами запуска будем называть целевыми конфигурациями, аналогично для множества \(\mathbb{Q}\) - тестовыми конфигурациями.

		Для нескольких запусков приложения с фиксированными параметрами наблюдается разброс значений динамических характеристик. Это можно объяснить различным размещением процессов на узлах вычислительной системы, различной степенью загруженности коммуникационной сети во время работы приложения. Поэтому необходимо проводить множественные(5-7) запуски приложения для каждой конкретной конфигурации. Чтобы затем в зависимости от рассматриваемой динамической характеристики выбрать достигнутый максимум или минимум значения динамической характеристики среди запусков с идентичными параметрами запуска.

		В качестве динамических характеристик, для которых строятся предсказание масштабируемости, выбраны время выполнения программы и её производительность. Для двух из пяти выбранных программ производительность измеряется в GFlops, ещё для одной в MTeps, а для остальных двух рассматривается только время выполнения, так как точно посчитать производительность не представляется возможным. Для набора запусков с идентичными конфигурациями выбирается минимум времени исполнения и максимум производительности среди всех запусков набора.

	\subsection{Общая схема работы метода}
		\begin{enumerate}[I]
		\item Определение набора тестовых конфигураций.
		\item Проведение запусков с этими конфигурациями.
		\item Извлечение из результатов запусков необходимых для поиска неизвестных коэффициентов модели данных, для идентичных конфигураций выбирается минимум времени / максимум производительности исполнения.
		\item Использование метода наименьших квадратов для подбора коэффициентов линейной регрессии.
		\item Построение предсказаний значения динамической характеристики для заданного множества целевых запусков с помощью построенной модели.
		\end{enumerate}
		% \begin{table}
		% \centering
		% \begin{tabular}{|c|c|}
		% 	\[ A_b \] & \[ A_c \]
		% \end{tabular}
		% \caption{Тестовые конфигурации запусков HPL, для трёх различных значений констант}
		% \label{test_HPL}
		% \end{table}

\clearpage
%\newpage