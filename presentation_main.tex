% \documentclass[12pt,fleqn]{beamer}

% \usepackage{amsmath, amsthm, amssymb} %math expressions, theoreme/lemma, math symbols
% \usepackage{mathtext} %russian letters in formulas

% % fonts and lang
% %\usepackage[T1,TS1,T2A]{fontenc}
% \usepackage{cmap}
% \usepackage[T1, T2A]{fontenc}
% \usepackage[utf8]{inputenc}
% \usepackage[english, russian]{babel}

% % formatting
% % \usepackage{geometry} %customize page layout
% % \geometry{left = 3cm}
% % \geometry{right = 1cm}
% % \geometry{top = 1.5cm}
% % \geometry{bottom = 2cm}

% \usepackage{setspace} %set space between lines
% \usepackage{indentfirst} %indent first pagearagraph after section header

% \usepackage{tocloft} %control table of contents, figures

% \usepackage{graphicx}

% \usepackage{hhline}

% \usepackage{caption}

% \usepackage{subcaption}

% \usepackage[shortlabels]{enumitem}
% \setlist{nolistsep, itemsep=0.1cm, parsep=0pt, leftmargin=1.5cm}

% \usepackage{multirow}

% \usepackage{algorithm}
% \usepackage{algpseudocode}

%%%%%%%%%%%%%%%% что - то про dvips
% latex yourfile.tex
% dvips yourfile.dvi
% ps2pdf yourfile.ps
\documentclass[unicode, t]{beamer}% [t], [c], или [b] --- вертикальное выравнивание на слайдах (верх, центр, низ)
%\documentclass[aspectratio=169]{beamer} % Соотношение сторон

%\usetheme{Berkeley} % Тема оформления
%\usetheme{Bergen}
%\usetheme{Szeged}

%\usecolortheme{beaver} % Цветовая схема
%\useinnertheme{circles}
%\useinnertheme{rectangles}

%%% Работа с русским языком
\usepackage{cmap}					% поиск в PDF
\usepackage{mathtext} 				% русские буквы в формулах
% \usepackage[T2A]{fontenc}			% кодировка
\usepackage[T1, T2A]{fontenc}
\usepackage[utf8]{inputenc}			% кодировка исходного текста
\usepackage[english,russian]{babel}	% локализация и переносы

% %% Beamer по-русски
% \newtheorem{rtheorem}{Теорема}
% \newtheorem{rproof}{Доказательство}
% \newtheorem{rexample}{Пример}
\usepackage{amsmath, amsfonts, amssymb, amsthm, mathtools} % AMS
%\usepackage{icomma} % "Умная" запятая: $0,2$ --- число, $0, 2$ --- перечисление

%% Номера формул
%\mathtoolsset{showonlyrefs=true} % Показывать номера только у тех формул, на которые есть \eqref{} в тексте.
%\usepackage{leqno} % Нумерация формул слева

%% Свои команды
%\DeclareMathOperator{\sgn}{\mathop{sgn}}


%%% Работа с картинками
\usepackage{graphicx}  % Для вставки рисунков
%\graphicspath{{presentation/images/}}  % папки с картинками
\setlength\fboxsep{3pt} % Отступ рамки \fbox{} от рисунка
\setlength\fboxrule{1pt} % Толщина линий рамки \fbox{}
\usepackage{wrapfig} % Обтекание рисунков текстом

%%% Работа с таблицами
\usepackage{array,tabularx,tabulary,booktabs} % Дополнительная работа с таблицами
\usepackage{longtable}  % Длинные таблицы
\usepackage{multirow} % Слияние строк в таблице

%%% Программирование
\usepackage{etoolbox} % логические операторы

%%% Другие пакеты
\usepackage{lastpage} % Узнать, сколько всего страниц в документе.
\usepackage{soul} % Модификаторы начертания
\usepackage{csquotes} % Еще инструменты для ссылок
%\usepackage[style=authoryear,maxcitenames=2,backend=biber,sorting=nty]{biblatex}
\usepackage{multicol} % Несколько колонок

%%% Картинки
\usepackage{tikz} % Работа с графикой
%\usepackage{pgfplots}
%\usepackage{pgfplotstable}

\usepackage{enumitem}
\usepackage{enumerate}

%\definecolor{applegreen}{rgb}{0.55, 0.71, 0.0}

\setbeamertemplate{footline}[frame number]

\title{
	{\footnotesize\color{black}Московский государственный университет имени М.В.Ломоносова\\
    Факультет Вычислительной Математики и Кибернетики\\
    Кафедра Суперкомпьютеров и Квантовой Информатики\\}
    \vspace{\baselineskip}
    {\LARGEРазработка метода прогнозирования слабой масштабируемости суперкомпьютерных приложений}
}
%\subtitle{SUBTITLE}
\author{\footnotesizeСтудент: Мокров К.С., 423 группа\\
		Науч. руководитель: к.ф-м.н.,
		в.н.с. НИВЦ МГУ\\
		Антонов Александр Сергеевич}

\date{\includegraphics[height=0.8cm]{./images/MSU}\\
	  \scriptsize
	  Москва\\
	  2020 г.}
%\logo{\includegraphics[height=1.5cm]{./images/MSU}}

\begin{document}

	\frame[plain]{\titlepage}	% Титульный слайд

	\section{Введение}
		\begin{frame}
		AAAA
		\end{frame}

	\section{Постановка задачи}
		\begin{frame}
			\frametitle{\insertsection}
			\begin{itemize}[label=\(\bullet\)]
				\item Исследовать возможные подходы к предсказанию масштабируемости
				\item Реализовать метод, предсказывающий слабую масштабируемость суперкомпьютерных приложений на основе экспериментальных данных
				\item Проверить применимость метода на различных приложениях, собрав экспериментальную базу и оценив точность предсказаний.
			\end{itemize}
		\end{frame}

	\section{Обзор существующих подходов к предсказанию масштабируемости}
		\begin{frame}
			\frametitle{\insertsection}
			\begin{columns}
				\begin{column}{.5\textwidth}
				\setbeamercovered{transparent}
					\begin{itemize}
						\item<1> Линейная регрессия.
						\item<2> Методы машинного обучения.
						\item<3> Симуляция исполнения программы.
						\item<4> Коллаборативная фильтрация.
					\end{itemize}
				\end{column}
				\begin{column}{.5\textwidth}
					\footnotesize
					\only<1>{
					\begin{itemize}
						\item[\(+\)] Модель простая, легко искать неизвестные параметры.
						\item[\(+\)] Точность предсказаний сопоставима либо сопоставима, либо даже лучше, чем у других методов
						\item[\(+\)] Для поиска параметров не требуется большое число запусков.
						\item[\(-\)] Далеко не всегда простая модель может описать поведение рассматриваемой величины из-за её нелинейного характера изменения
					\end{itemize}
					}
					\only<2>{
					\begin{itemize}
						\item[\(+\)] Способны уловить сложные аспекты взаимодействия между архитектурой суперкомпьютера и исследуемыми программами.
						\item[\(+\)] Возможность работать при наличии неинформативных, зашумлённых входных данных.
						\item[\(-\)] Для обучения необходимо провести большое число запусков приложения.
						\item[\(-\)] Относительно высокая вычислительная стоимость процесса обучения как по времени, так и по памяти.
						\item[\(-\)] Чёрный ящик - невозможно объяснить ответ.
					\end{itemize}
					}
					\only<3>{
					\begin{itemize}
						\item[\(+\)] Сбор трасс исполнения приложения и его профилирование может быть произведено на одной машине для последующей стимуляции исполнения на другой.
						\item[\(-\)] Часто требует для своей работы наличия информации о структуре программы и подробных технических характеристик используемой системы.
						\item[\(-\)] Сложно реализовать.
					\end{itemize}
					}
					\only<4>{
					\begin{itemize}
						\item[\(+\)] Давно используется в рекомендательных системах, где хорошо себя зарекомендовала.
						\item[\(-\)] Для построения точных прогнозов необходимо провести много тестирований программы и иметь доступ к  большим наборам параметров запуска программа и динамических характеристик исполнения.
					\end{itemize}
					}
				\end{column}
			\end{columns}
		\end{frame}

	\section{Описание разработанного метода}
		\subsection{Экстраполирующая функция и оценка ошибок предсказаний}
			\begin{frame}
				\frametitle{\insertsection}
					\framesubtitle{\insertsubsection}
					С помощью линейной регрессии строятся предсказания значений динамических характеристик на \(\dot{p}\) процессах, использую эмпирические данные, полученные из нескольких запусков на \(\mathbb{Q} = \{q_1,\ldots, q_n\},\ q_1 < q_2 < \ldots < q_n < \dot{p}\) процессах.

					Предиктор - функция от параметров запуска и количества используемых процессов: \(\label{main_formula}DF = \hat{DF} + error = F(x_1, x_2, \ldots, x_n, p) + error\)

					Для нахождения оптимальных значений параметров используется метод наименьших квадратов, он минимизирует: \(SSE = |f(w, g(X)) - y|_2 = \sum_{i = 1}^{N}{(f(w, g_i(X)) - y_i)^2 \rightarrow min}\)
			\end{frame}
			\begin{frame}
				\frametitle{\insertsection}
					\framesubtitle{\insertsubsection}
					Что эквивалентно минимизации абсолютной ошибки \(error\). Но для оценки качества предсказаний принято использовать относительную ошибку.%СКАЗАТЬ ПОЧЕМУ

					\begin{tikzpicture}
						\draw [thick, ->] 
						(2,0.5) -- (0,0);
						\draw [thick, ->]
						(2,0.5) -- (4,0);
						\draw
						(0,0) node[left] {\(RE_{norm} = \frac{|error|}{\only<1>{\color{black}DF}\only<2->{\color{red}DF}}\)}
						(2,0.5) node[above] {\(RE = \frac{|DF - \hat{DF}|}{DF}\)};
						\onslide<3->{
						\draw
						(4,0) node[right] {\(RE_{log}= 2^{|{\color{green}error}|} - 1\)};
						}
					\end{tikzpicture}
					\onslide<2->{Относительная ошибка зависит не только от минимизируемой с помощью метода наименьших квадратов ошибки, но и от значения динамической характеристики.}
					\onslide<3->{Поэтому был применён один из методов преодоления этой проблемы - приближение аппроксимируемой величины в логарифмическом масштабе:
					\(\log{(DF)} = \log{\hat{(DF)}} + error\)}
					\onslide<4->{, где
					\(\log{\hat{(DF)}} = \beta_{1} \cdot \log{(p)} + \beta_{2} \cdot \log{(N)} + \beta_{3} \cdot \log{(p)} \cdot \log{(N)}\)}
					% Здесь за \(N\) обозначен размер задачи, а за \(p\) количество процессов, на которых эта задача запускается. Несмотря на наличие логарифмов, статистически это всё ещё линейная модель, поскольку она линейна относительно неизвестных параметров, поэтому можно использовать обширную статистическую теорию линейных моделей, в том числе поиск коэффициента с помощью метода наименьших квадратов.

					% \begin{tikzpicture}
					% 	\draw [thick, ->] 
					% 	(2,0.5) -- (0,0);
					% 	\draw [thick, ->]
					% 	(2,0.5) -- (4,0);
					% 	\draw
					% 	(0,0) node[left] {\(RE_{norm} = \frac{|error|}{\only<1>{\color{black}DF}\only<2-3>{\color{red}DF}}\)}
					% 	(2,0.5) node[above] {\(RE = \frac{|DF - \hat{DF}|}{DF}\)}
					% 	(4,0) node[right] {\(RE_{log}= 2^{|{\only<1-2>{\color{black}error}\only<3>{\color{green}error}}|} - 1\)};						
					% \end{tikzpicture}
					% Относительная ошибка зависит не только от минимизируемой с помощью метода наименьших квадратов ошибки, но и от значения динамической характеристики. Поэтому был применён один из способов преодоления этой проблемы - приближение величины в логарифмическом масштабе:
					% \(\log{(DF)} = \log{\hat{(DF)}} + error = \beta_{1} \cdot \log{(p)} + \beta_{2} \cdot \log{(N)} + \beta_{3} \cdot \log{(p)} \cdot \log{(N)} + error\)
			\end{frame}

		\subsection{Выбор конфигураций и проведение запусков}
			\begin{frame}
				\frametitle{\insertsection}
	 			\framesubtitle{\insertsubsection}
	 			\begin{itemize}[label=\(\bullet\)]
					\item Для того чтобы исследовать слабую масштабируемость должно быть заранее известно, какие параметры запуска отвечают за определение размера задачи и как именно сложность работы программы зависит от этих самых параметров.
					% Зная на скольких процессах требуется запустить задачу, сложность программы и используя соотношение \eqref{weak_sc}, можно установить, какая должна быть сложность задачи и определяющие её параметры запуска программы. Тогда процессы из множества \(\mathbb{Q}\) вместе с соответствующими им параметрами запуска будем называть тестовыми конфигурациями, а конфигурации, на которых будет оцениваться качество предсказаний метода - целевыми.
					\item При сборе тестовых данных необходимо прежде всего определить тестовые конфигурации запусков. Для этого нужно узнать, сколько доступно процессов - \(p_{max}\), составить множество \[\mathbb{Q} = \{q_{i + 1} - q_{i} = const,\ i = \overline{1,n - 1};\ q_n = p_{max}\}\] и определить соответствующие параметры запуска.
					% Сказать про то как я это делал, про очередь test
				\end{itemize}
			\end{frame}
			\begin{frame}
				\frametitle{\insertsection}
	 			\framesubtitle{\insertsubsection}
	 			\begin{itemize}[label=\(\bullet\)]
					\item Для нескольких запусков приложения с фиксированными параметрами наблюдается разброс значений динамических характеристик \(\Rightarrow\) необходимо проводить множественные(5-7) запуски приложения для каждой конкретной конфигурации.
					% Это можно объяснить различным размещением процессов на узлах вычислительной системы, различной степенью загруженности коммуникационной сети во время работы приложения. ||| 
					% Чтобы затем в зависимости от рассматриваемой динамической характеристики выбрать достигнутый максимум или минимум значения динамической характеристики среди запусков с идентичными параметрами запуска.
					\item В качестве динамических характеристик, для которых строятся предсказание масштабируемости, выбраны время выполнения программы и её производительность. Для набора запусков с идентичными конфигурациями выбирается минимум времени исполнения и максимум производительности среди всех запусков набора.
					% Для двух из пяти выбранных программ производительность измеряется в GFlops, ещё для одной в MTeps, а для остальных двух рассматривается только время выполнения, так как точно посчитать производительность не представляется возможным.
				\end{itemize}
			\end{frame}
		\subsection{Общая схема работы метода}
		\begin{frame}
			\frametitle{\insertsection}
	 		\framesubtitle{\insertsubsection}
	 		\begin{enumerate}[label=\(\Roman{enumi}\)]
				\item Определение набора тестовых конфигураций.
				\item Проведение запусков с этими конфигурациями.
				\item Извлечение из результатов запусков необходимых для поиска неизвестных коэффициентов модели данных, для идентичных конфигураций выбирается минимум времени / максимум производительности исполнения.
				\item Использование метода наименьших квадратов для подбора коэффициентов линейной регрессии.
				\item Построение предсказаний значения динамической характеристики для заданного множества целевых запусков с помощью построенной модели.
			\end{enumerate}
		\end{frame}

	\section{Экспериментальная проверка применимости метода}
		\subsection{HPL}
		\subsection{HPCG}
		\subsection{Алгоритмы матричного умножения}
			\subsubsection{SUMMA}
			\subsubsection{DNS}
		\subsection{Graph500}
	\section{Заключение}

\end{document}

% \begin{frame}
% 	\frametitle{\insertsection}
% 		\framesubtitle{\insertsubsection}

% \end{frame}
